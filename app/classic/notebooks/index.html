<!DOCTYPE html>
<html>
  <head>
    <title>JupyterLite Classic - Notebook</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script id="jupyter-config-data" type="application/json"></script>
  </head>
  <body>
    <script>
      (function() {
        var pageInfo = document.getElementById('jupyter-config-data');
        var base = window.location.pathname.replace(
          /\/classic\/notebooks(\/|\/index.html)?$/,
          '/'
        );
        const normalizePathName = () => {
          const urlPath = document.location.pathname.replace('index.html', '');
          // get the parent path for lab
          let regexp = /^(?<relativeUrlPath>.*\/)\w+\/?$/;
          if (urlPath.includes('classic')) {
            // get the parent of parent path for classic
            regexp = /^(?<relativeUrlPath>.*\/)\w+\/\w+\/?$/;
          }
          return urlPath.match(regexp)?.groups?.relativeUrlPath;
        };
        pageInfo.textContent = JSON.stringify(
          {
            classicPage: 'notebooks',
            baseUrl: base,
            fullStaticUrl: base + 'classic/build',
            fullMathjaxUrl: `${document.location.protocol}//${
              document.location.host
            }${normalizePathName()}mathjax/MathJax.js`,
            mathjaxConfig: 'TeX-AMS_CHTML-full,Safe',
            settingsUrl: base + 'classic/build/schemas',
            themesUrl: base + 'classic/build/themes'
          },
          null,
          2
        );
        const bundle = document.createElement('script');
        bundle.src = base + 'classic/build/bundle.js';
        bundle.main = 'index';
        document.body.appendChild(bundle);
        const favicon = document.createElement('link');
        favicon.rel = 'icon';
        favicon.type = 'image/x-icon';
        favicon.href = base + 'classic/notebooks/favicon.ico';
        document.head.appendChild(favicon);
      })();
    </script>
  </body>
</html>
